programa ejercicio4
procesos
  proceso hacerTareaUno
  comenzar
    mientras (HayFlorEnLaEsquina)
      tomarFlor
  fin
  
  proceso hacerTareaDos
  comenzar
    mientras (HayPapelEnLaEsquina)
      tomarPapel
  fin
  
  proceso hacerTareaTres
  comenzar
    mientras (HayFlorEnLaBolsa)
      depositarFlor
    mientras (HayPapelEnLaBolsa)
      depositarPapel
  fin
  
  
areas
  areaJefe: AreaP (1,1,1,1)
  areaTrabajador1: AreaP (2,1,2,1)
  areaTrabajador2: AreaP (3,1,3,1)
  areaDeTrabajo: AreaPC (2,2,100,100)
  
robots
  robot trabajador
  variables
    tarea: numero
    av,ca,avInicial,caInicial: numero
    quienSoy: numero
  comenzar
    RecibirMensaje(quienSoy, robotJefe)
    RecibirMensaje(tarea, robotJefe)
    avInicial:= PosAv
    caInicial:= PosCa
    mientras (tarea <> 4)
      RecibirMensaje(av, robotJefe)
      RecibirMensaje(ca, robotJefe)
      BloquearEsquina(av,ca)
      Pos(av,ca)
      si (tarea = 1)
        hacerTareaUno
      sino
        si (tarea = 2)
          hacerTareaDos
        sino
          hacerTareaTres
      Pos(avInicial, caInicial)
      LiberarEsquina(av,ca)
      RecibirMensaje(tarea, robotJefe)
  fin
  
  robot jefe
  variables
    tarea: numero
    av, ca: numero
    trabajador: numero
  comenzar
    EnviarMensaje(1, robotTrabajador1)
    EnviarMensaje(2, robotTrabajador2)
    
    repetir 10
      Random(tarea,1,3)
      Random(av,2,100)
      Random(ca,2,100)
      Random(trabajador,1,2)
      si (trabajador = 1)
        EnviarMensaje(tarea, robotTrabajador1)
        EnviarMensaje(av, robotTrabajador1)
        EnviarMensaje(ca, robotTrabajador1)
      sino
        EnviarMensaje(tarea, robotTrabajador2)
        EnviarMensaje(av, robotTrabajador2)
        EnviarMensaje(ca, robotTrabajador2)
        
    EnviarMensaje(4,robotTrabajador1)
    EnviarMensaje(4,robotTrabajador2)
  fin
  
  
variables
  robotTrabajador1: trabajador
  robotTrabajador2: trabajador
  robotJefe: jefe
comenzar
  AsignarArea(robotTrabajador1, areaTrabajador1)
  AsignarArea(robotTrabajador2, areaTrabajador2)
  AsignarArea(robotJefe, areaJefe)
  AsignarArea(robotTrabajador1, areaDeTrabajo)
  AsignarArea(robotTrabajador2, areaDeTrabajo)
  Iniciar(robotJefe, 1,1)
  Iniciar(robotTrabajador1, 2,1)
  Iniciar(robotTrabajador2, 3,1)
fin


**RESPUESTA A PREGUNTAS TEORICAS**
- Si, existe riesgo de colision, cuando no se bloquean ni liberan bien las esquinas. Puede pasar que 2 robots se choquen, o incluso si la esquina se libera mal, quede bloqueado.

- La manera de evitar esto es: 

1- Bloquear una esquina que puede ser accedida por 2 o mas robots
2- Posicionarse en esa esquina
3- hacer lo solicitado 
4- Volver a la esquina inicial (o salir de esa esquina conflictiva y ir a una que no tenga conflicto)
5- Liberar la esquina que puede ser accedida por 2 o mas robots.
