{ 
Tres robots papeleros deben realizar 3 escalones cada uno, juntando todos los papeles a su paso. El tamaño (alto y ancho) de los escalones que realizará cada robot será calculado al inicio por un robot fiscalizador de manera aleatoria entre 1 y 4 de alto, y entre 1 y 3 de ancho.
Una vez finalizados los 3 escalones, cada papelero deberá depositar de una sola vez todos los papeles juntados en el depósito localizado en la esquina (100,100).

Cuando todos los robots finalizaron, el fiscalizador deberá indicar qué robot juntó más papeles. El fiscalizador inicia en la esquina (1,1), y los robots papeleros inician en las esquinas (2,1), (3,2,1) y (6,2,1) respectivamente.
}

---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

programa ParcialTurnoN
procesos

  proceso depositarTodosLosPapeles 
  comenzar
    mientras (HayPapelEnLaBolsa)
      depositarPapel
  fin

  proceso juntarTodosLosPapeles (ES cantPapeles: numero)
  comenzar
    mientras (HayPapelEnLaEsquina)
      tomarPapel
      cantPapeles:= cantPapeles +1
  fin
  
  proceso hacerEscalon(E alto: numero; E ancho: numero; ES cantTotalPapeles: numero)
  comenzar
    repetir alto
      juntarTodosLosPapeles(cantTotalPapeles)
      mover
    derecha
    repetir ancho
      juntarTodosLosPapeles(cantTotalPapeles)
      mover
  fin
  
  proceso izquierda 
  comenzar
    repetir 3
      derecha
  fin
  
areas
  areaInicioFiscalizador: AreaC (1,1,1,1)
  
  areaRealizarPapalero1: AreaP (2,1,11,13)
  areaRealizarPapalero2: AreaP (32,1,41,13)
  areaRealizarPapalero3: AreaP (62,1,71,13)
  
  areaDeposito: AreaPC (100,100,100,100)
  
  
robots
  robot papelero
  variables
    quienSoy: numero
    cantTotalPapeles: numero
    alto, ancho: numero
    avInicial, caInicial: numero
  comenzar
    cantTotalPapeles:= 0
    RecibirMensaje(quienSoy, fiscalizador)
    RecibirMensaje(alto, fiscalizador)
    RecibirMensaje(ancho, fiscalizador)
    repetir 3
      hacerEscalon(alto, ancho, cantTotalPapeles)
      izquierda
    avInicial:= PosAv
    caInicial:= PosCa
    BloquearEsquina(100,100)
    Pos(100,100)
    depositarTodosLosPapeles
    Pos(avInicial, caInicial)
    LiberarEsquina(100,100)
    EnviarMensaje(quienSoy, fiscalizador)
    EnviarMensaje(cantTotalPapeles, fiscalizador)
  fin
  
  robot fiscalizador
  variables
    alto, ancho: numero
    ID: numero
    cantTotalPapeles, maxPapeles: numero
    maxRobot: numero
  comenzar
    maxPapeles:= -1
    EnviarMensaje(1, papelero1)
    EnviarMensaje(2, papelero2)
    EnviarMensaje(3, papelero3)
    alto:= 4
    ancho:= 3
    EnviarMensaje(alto, papelero1)
    EnviarMensaje(ancho, papelero1)
    EnviarMensaje(alto, papelero2)
    EnviarMensaje(ancho, papelero2)
    EnviarMensaje(alto, papelero3)
    EnviarMensaje(ancho, papelero3)
    
    repetir 3
      RecibirMensaje(ID, *)
      si (ID = 1)
        RecibirMensaje(cantTotalPapeles, papelero1)
      sino
        si (ID = 2)
          RecibirMensaje(cantTotalPapeles, papelero2)
        sino
          RecibirMensaje(cantTotalPapeles, papelero3)
      
      si (cantTotalPapeles > maxPapeles)
        maxPapeles:= cantTotalPapeles
        maxRobot:= ID
    
    Informar(maxRobot)
  fin
  
variables
  papelero1: papelero
  papelero2: papelero
  papelero3: papelero
  fiscalizador: fiscalizador
comenzar
  AsignarArea(papelero1, areaRealizarPapalero1)
  AsignarArea(papelero2, areaRealizarPapalero2)
  AsignarArea(papelero3, areaRealizarPapalero3)
  AsignarArea(fiscalizador, areaInicioFiscalizador)
  AsignarArea(papelero1, areaDeposito)
  AsignarArea(papelero2, areaDeposito)
  AsignarArea(papelero3, areaDeposito)
  Iniciar(papelero1, 2,1)
  Iniciar(papelero2, 32,1)
  Iniciar(papelero3, 62,1)
  Iniciar(fiscalizador, 1,1)
fin
